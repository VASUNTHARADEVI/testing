/*
 * Copyright (c) 2012 Yahoo! Inc. All rights reserved.
 */
YUI.add('primaryBinderIndex', function(Y, NAME) {

/**
 * The test_mojit_01BinderIndex module.
 *
 * @module test_mojit_01BinderIndex
 */

    /**
     * Constructor for the Binder class.
     *
     * @param mojitProxy {Object} The proxy to allow the binder to interact
     *        with its owning mojit.
     *
     * @class Binder
     * @constructor
     */
    Y.namespace('mojito.binders')[NAME] = {

        /**
         * Binder initialization method, invoked after all binders on the page
         * have been constructed.
         */
        init: function(mojitProxy) {
            this.mojitProxy = mojitProxy;
            Y.log('Loaded binder for primary mojit!');
        },

        /**
         * The binder method, invoked to allow the mojit to attach DOM event
         * handlers.
         *
         * @param node {Node} The DOM node to which this mojit is attached.
         */
        bind: function(node) {
            this.node = node;
            Y.one('#call').on('click',this._executeInvoke,this);
        },
        _executeInvoke:function(evt){
            var self = this;
            Y.log('before: ');
            Y.log(this.node.get('id'));

            this.mojitProxy.render({title:'renderPrimary'},'index',function(){
                Y.log('after: ');
                Y.log(self.node.get('id'));
                Y.log(arguments);
            });
        },
        resultInvoke:function(){
            Y.log(arguments);
        }

    };

}, '0.0.1', {requires: ['mojito-client']});
YUI.add("views/primary/dynamic", function (Y, NAME) {
	YUI.namespace("_mojito._cache.compiled.primary.views");
	YUI._mojito._cache.compiled.primary.views.dynamic = "<div id = \"{{mojit_view_id}}\">\n\t{{{title}}}\n</dic>";
});YUI.add("views/primary/index", function (Y, NAME) {
	YUI.namespace("_mojito._cache.compiled.primary.views");
	YUI._mojito._cache.compiled.primary.views.index = "<div id = \"{{mojit_view_id}}\">\n<div id=\"leadstory\">\n    <div class=\"hd\">\n        <div class=\"hdbg\">\n            <h1>Silent buck</h1>\n        </div>\n    </div>\n\n    <div class=\"bd\">\n        <div class=\"photo\">\n            <a href=\"#\"><img src=\"/static/demo/assets/images/jaredsullinger410_324getty.jpg\" width=\"410\" height=\"285\" alt=\"Jared Sullinger\"></a>\n        </div>\n\n        <div class=\"text\">\n            <div class=\"credit\">Getty Images</div>\n\n            <div class=\"content\">\n                <div class=\"story\">\n                    <p><strong>{{title}}</strong> Jared Sullinger being saddled with foul trouble, Ohio State is in a tight battle with Syracuse.&nbsp;&nbsp;</p>\n                    <ul class=\"inline\">\n                        <li class=\"\">\n                            <a href=\"#\" class=\"\">OSU 38, SYR 33 <small>(17:32 2nd)</small></a>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"secondary\">\n                    <ul class=\"inline\">\n                        <li class=\"\">\n                            <a id=\"call\" href=\"#\">Call another action!</a>\n                        </li>\n                        <li class=\"P\">\n                            <a href=\"#\">Dynamically create more mojits</a>\n                        </li>\n                        <li class=\"P\">\n                            <a href=\"#\">More stuff</a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>";
});