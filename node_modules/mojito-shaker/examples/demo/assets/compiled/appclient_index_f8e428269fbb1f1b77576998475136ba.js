/*
 * Copyright (c) 2011 Yahoo! Inc. All rights reserved.
 */
YUI.add('master', function(Y, NAME) {

/**
 * The master module.
 *
 * @module master
 */

var DIMENSIONS = {
    device: 'smartphone',
    region: 'CA',
    skin  : 'grey'
};

    /**
     * Constructor for the Controller class.
     *
     * @class Controller
     * @constructor
     */
    Y.mojito.controllers[NAME] = {
        init: function(config) {
           this.config = config;
         },
        /**
         * Method corresponding to the 'index' action.
         *
         * @param ac {Object} The ActionContext that provides access
         *        to the Mojito API.
         */
        index: function(ac) {
            var dims = ac.params.getFromUrl(),
                self = this,
            
                config = {
                    view: 'index',
                    children: {
                        primary: {
                            type: 'primary',
                            action: 'index'
                        },
                        secondary: {
                            type: 'secondary',
                            action: 'index'
                        }
                    }
                };

            ac.composite.execute(config, function (data, meta) {
                data.buttons = self.createButtons(ac, dims);
                ac.done(data, meta);
            });
        },
        createButtons: function (ac, dims) {
            var buttons = [],
                className,
                label,
                url;
            
            Y.each(Y.Object.keys(DIMENSIONS), function (dim) {
                var params = Y.merge({}, dims);
                
                className = 'nav nav-' + dim + (dims[dim] ? ' active' : '');
                params[dim] ? delete params[dim] : params[dim] = DIMENSIONS[dim];
                
                url = ac.url.make('htmlframe', 'index', null, 'GET', params);
                
                label = dim.substring(0,1).toUpperCase() + dim.substring(1);
                
                buttons.push('<a href="'+url+'" class="'+className+'">'+label+'</a>');
            });
            
            return buttons.join('\n');
        }
    };

}, '0.0.1', {requires: ['mojito', 'mojito-assets-addon']});
/*
 * Copyright (c) 2011 Yahoo! Inc. All rights reserved.
 */
YUI.add('secondary', function(Y, NAME) {

/**
 * The features module.
 *
 * @module features
 */

    /**
     * Constructor for the Controller class.
     *
     * @class Controller
     * @constructor
     */
    Y.mojito.controllers[NAME] = {
        init: function(config) {
           this.config = config;
         },

        /**
         * Method corresponding to the 'index' action.
         *
         * @param ac {Object} The ActionContext that provides access
         *        to the Mojito API.
         */
        index: function(ac) {
            ac.done({'title': 'secondary'});
        }

    };

}, '0.0.1', {requires: ['mojito']});
/*
 * Copyright (c) 2012 Yahoo! Inc. All rights reserved.
 */
YUI.add('primaryBinderIndex', function(Y, NAME) {

/**
 * The test_mojit_01BinderIndex module.
 *
 * @module test_mojit_01BinderIndex
 */

    /**
     * Constructor for the Binder class.
     *
     * @param mojitProxy {Object} The proxy to allow the binder to interact
     *        with its owning mojit.
     *
     * @class Binder
     * @constructor
     */
    Y.namespace('mojito.binders')[NAME] = {

        /**
         * Binder initialization method, invoked after all binders on the page
         * have been constructed.
         */
        init: function(mojitProxy) {
            this.mojitProxy = mojitProxy;
            Y.log('Loaded binder for primary mojit!');
        },

        /**
         * The binder method, invoked to allow the mojit to attach DOM event
         * handlers.
         *
         * @param node {Node} The DOM node to which this mojit is attached.
         */
        bind: function(node) {
            this.node = node;
            Y.one('#call').on('click',this._executeInvoke,this);
        },
        _executeInvoke:function(evt){
            var self = this;
            Y.log('before: ');
            Y.log(this.node.get('id'));

            this.mojitProxy.render({title:'renderPrimary'},'index',function(){
                Y.log('after: ');
                Y.log(self.node.get('id'));
                Y.log(arguments);
            });
        },
        resultInvoke:function(){
            Y.log(arguments);
        }

    };

}, '0.0.1', {requires: ['mojito-client']});
/*
 * Copyright (c) 2012 Yahoo! Inc. All rights reserved.
 */
YUI.add('secondaryBinderIndex', function(Y, NAME) {

/**
 * The test_mojit_01BinderIndex module.
 *
 * @module test_mojit_01BinderIndex
 */

    /**
     * Constructor for the Binder class.
     *
     * @param mojitProxy {Object} The proxy to allow the binder to interact
     *        with its owning mojit.
     *
     * @class Binder
     * @constructor
     */
    Y.namespace('mojito.binders')[NAME] = {

        /**
         * Binder initialization method, invoked after all binders on the page
         * have been constructed.
         */
        init: function(mojitProxy) {
            this.mojitProxy = mojitProxy;
        },

        /**
         * The binder method, invoked to allow the mojit to attach DOM event
         * handlers.
         *
         * @param node {Node} The DOM node to which this mojit is attached.
         */
        bind: function(node) {
            this.node = node;
        }

    };

}, '0.0.1', {requires: ['mojito-client']});
YUI.add("views/master/index", function (Y, NAME) {
	YUI.namespace("_mojito._cache.compiled.master.views");
	YUI._mojito._cache.compiled.master.views.index = "<div id=\"doc\">\n    <div id=\"head\" class=\"clearfix\">\n        <h1><a href=\"/\">Shaker Demo</a></h1>\n    \n        <div id=\"nav\">\n         {{{buttons}}}   \n        </div>\n    </div>\n    \n    <div id=\"main\" class=\"clearfix\">\n        {{{primary}}}\n        {{{secondary}}}\n    </div>\n</div>";
});YUI.add("views/primary/dynamic", function (Y, NAME) {
	YUI.namespace("_mojito._cache.compiled.primary.views");
	YUI._mojito._cache.compiled.primary.views.dynamic = "<div id = \"{{mojit_view_id}}\">\n\t{{{title}}}\n</dic>";
});YUI.add("views/primary/index", function (Y, NAME) {
	YUI.namespace("_mojito._cache.compiled.primary.views");
	YUI._mojito._cache.compiled.primary.views.index = "<div id = \"{{mojit_view_id}}\">\n<div id=\"leadstory\">\n    <div class=\"hd\">\n        <div class=\"hdbg\">\n            <h1>Silent buck</h1>\n        </div>\n    </div>\n\n    <div class=\"bd\">\n        <div class=\"photo\">\n            <a href=\"#\"><img src=\"/static/demo/assets/images/jaredsullinger410_324getty.jpg\" width=\"410\" height=\"285\" alt=\"Jared Sullinger\"></a>\n        </div>\n\n        <div class=\"text\">\n            <div class=\"credit\">Getty Images</div>\n\n            <div class=\"content\">\n                <div class=\"story\">\n                    <p><strong>{{title}}</strong> Jared Sullinger being saddled with foul trouble, Ohio State is in a tight battle with Syracuse.&nbsp;&nbsp;</p>\n                    <ul class=\"inline\">\n                        <li class=\"\">\n                            <a href=\"#\" class=\"\">OSU 38, SYR 33 <small>(17:32 2nd)</small></a>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"secondary\">\n                    <ul class=\"inline\">\n                        <li class=\"\">\n                            <a id=\"call\" href=\"#\">Call another action!</a>\n                        </li>\n                        <li class=\"P\">\n                            <a href=\"#\">Dynamically create more mojits</a>\n                        </li>\n                        <li class=\"P\">\n                            <a href=\"#\">More stuff</a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>";
});YUI.add("views/secondary/index", function (Y, NAME) {
	YUI.namespace("_mojito._cache.compiled.secondary.views");
	YUI._mojito._cache.compiled.secondary.views.index = "<div id = \"{{mojit_view_id}}\">\n<div id=\"features\">\n    <div class=\"feature\">\n        <div class=\"photo\">\n            <img src=\"/static/demo/assets/images/dariusmiller60_324getty.jpg\" width=\"60\" height=\"85\" alt=\"\">\n        </div>\n\n        <div class=\"hd\">\n            <h4>Kentucky-Baylor, 2:20 ET</h4>\n        </div>\n\n        <div class=\"bd\">\n            <div class=\"story\">\n                <p>The Wildcats' Darius Miller is one of the nation's top sixth men.&nbsp;</p>\n                <ul class=\"inline\">\n                    <li>\n                        <a href=\"#\">Senior's last dance</a>\n                    </li>\n                </ul>\n            </div>\n            <ul class=\"icon_list\">\n                <li>\n                    <ul class=\"inline\">\n                        <li class=\"B\">\n                            <a href=\"#\">Bears turn to Jackson</a>\n                        </li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <div class=\"feature\">\n        <div class=\"photo\">\n            <img src=\"/static/demo/assets/images/tigertop_ap_1X.jpg\" width=\"60\" height=\"85\" alt=\"\">\n        </div>\n\n        <div class=\"hd\">\n            <h4>Palmer Invitational</h4>\n        </div>\n\n        <div class=\"bd\">\n            <div class=\"story\">\n                <p>Tiger Woods had to dig deep in Round 3 &ndash; but only a win matters.&nbsp;</p>\n                <ul class=\"inline\">\n                    <li>\n                        <a href=\"#\">Can he close?</a>\n                    </li>\n                </ul>\n            </div>\n            <ul class=\"icon_list\">\n                <li>\n                    <ul class=\"inline\">\n                        <li class=\"B\">\n                            <a href=\"#\">Up by one</a></li><li class=\"P\"><a href=\"#\" class=\"live\">Scores</a>\n                        </li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <div class=\"feature\">\n        <div class=\"photo\">\n            <img src=\"/static/demo/assets/images/us-canada.jpg\" width=\"60\" height=\"85\" alt=\"\">\n        </div>\n\n        <div class=\"hd\">\n            <h4>Olympic qualifying</h4>\n        </div>\n\n        <div class=\"bd\">\n            <div class=\"story\">\n                <p>The U.S. men's soccer team is behind the eight ball after losing to Canada.&nbsp;</p>\n                <ul class=\"inline\">\n                    <li>\n                        <a href=\"#\">Trouble</a>\n                    </li>\n                </ul>\n            </div>\n            <ul class=\"icon_list\">\n                <li>\n                    <ul class=\"inline\">\n                        <li class=\"B\">\n                            <a href=\"#\">2-0 stunner</a></li><li class=\"P\"><a href=\"#\">Slideshow</a>\n                        </li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <div class=\"feature\">\n        <div class=\"photo\">\n            <img src=\"/static/demo/assets/images/kempfantasy_g_1X.jpg\" width=\"60\" height=\"85\" alt=\"\">\n            <p class=\"provider\">Getty Images</p>\n        </div>\n\n        <div class=\"hd\">\n            <h4>Fantasy Baseball '12</h4>\n        </div>\n\n        <div class=\"bd\">\n            <div class=\"story\">\n                <p>The Dodgers' Matt Kemp is no longer No. 1 on the latest Big Board.&nbsp;</p>\n                <ul class=\"inline\">\n                    <li>\n                        <a href=\"#\">Who moved up?</a>\n                    </li>\n                </ul>\n            </div>\n            <ul class=\"icon_list\">\n                <li>\n                    <ul class=\"inline\">\n                        <li class=\"B\">\n                            <a href=\"#\">Sign up for a league</a>\n                        </li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n</div>\n";
});